function getSession(){var a=null;$.ajax({url:"/ajax/get_session",async:false}).done(function(c,d,b){a=c});return a}function changePassword(){var b=$("#new-password").val();var a=$("#confirm-password").val();if(!b){$("#change-password-message").text("Please enter a new password.")}else{if(!a){$("#change-password-message").text("Please confirm the new password")}else{if(b!==a){$("#change-password-message").text("Passwords do not match.")}else{$.post("/ajax/change_password",{new_password:b,user_id:125},function(d,e,c){$.magnificPopup.close();$("#my-account-message").text("Your password has been changed.")}).fail(function(){alert("Change password failed.")})}}}}function forgotPassword(){loginClose();var a=getSession();document.location.href=a.app_root+"forgot_password.php"}function sendPassword(a){if(document.forms[0].email.value.length===0){alert("Please provide an email address.")}else{alert("Email: "+a)}}function logout(){$.post("/ajax/logout",function(b,c,a){if(b.status==="SUCCESS"){if(b.login_type==="FACEBOOK"){FB.getLoginStatus(function(d){if(d.status==="connected"){FB.logout(function(e){})}})}document.location.href=b.app_root}else{if(b.status==="ERROR"){alert(b.message)}else{alert("Unknown return status: "+b.status)}}}).fail(function(){alert("Logout failed.")})}function showStatus(b,a){$(b).removeClass("red-text");$(b).text(a)}function showError(b,a){$(b).addClass("red-text");$(b).text(a)}function saveMyAccount(){if(!$("#first-name").val()){showError("#my-account-message","Please enter a first name.")}else{if(!$("#last-name").val()){showError("#my-account-message","Please enter a last name")}else{if(!$("#email").val()){showError("#my-account-message","Please enter a valid email.")}else{showStatus("#my-account-message","Saving account information...");var a=$.post("/ajax/user/update",$("#account-form").serialize());a.done(function(b){showStatus("#my-account-message","Your account changes have been saved.")});a.fail(function(b,c){showError("#my-account-message",c)})}}}};