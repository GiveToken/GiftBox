function getSession(){var a=null;$.ajax({url:"/ajax/get_session",async:false}).done(function(c,d,b){a=c});return a}function changePassword(){var c=$("#new-password").val();var a=$("#confirm-password").val();if(!c){$("#change-password-message").text("Please enter a new password.")}else{if(!a){$("#change-password-message").text("Please confirm the new password")}else{if(c!==a){$("#change-password-message").text("Passwords do not match.")}else{var b=event.target;$(b).addClass("disable-clicks");$.post("/ajax/change_password",{new_password:c,user_id:125},function(e,f,d){$.magnificPopup.close();$("#my-account-message").text("Your password has been changed.")}).fail(function(){alert("Change password failed.")}).always(function(){$(b).removeClass("disable-clicks")})}}}}function logout(){var a=event.target;$(a).addClass("disable-clicks");$.post("/ajax/logout",function(c,d,b){if(c.status==="SUCCESS"){if(c.login_type==="FACEBOOK"){FB.getLoginStatus(function(e){if(e.status==="connected"){FB.logout(function(f){})}})}document.location.href=c.app_root}else{if(c.status==="ERROR"){alert(c.message)}else{alert("Unknown return status: "+c.status)}}}).fail(function(){alert("Logout failed.")}).always(function(){$(a).removeClass("disable-clicks")})}function showStatus(b,a){$(b).removeClass("red-text");$(b).text(a)}function showError(b,a){$(b).addClass("red-text");$(b).text(a)}function saveMyAccount(){if(!$("#first-name").val()){showError("#my-account-message","Please enter a first name.")}else{if(!$("#last-name").val()){showError("#my-account-message","Please enter a last name")}else{if(!$("#email").val()){showError("#my-account-message","Please enter a valid email.")}else{showStatus("#my-account-message","Saving account information...");var b=event.target;$(b).addClass("disable-clicks");var a=$.post("/ajax/user/update",$("#account-form").serialize());a.done(function(c){showStatus("#my-account-message","Your account changes have been saved.")});a.fail(function(c,d){showError("#my-account-message",d)});a.always(function(){$(b).removeClass("disable-clicks")})}}}};