var companyInfo=null;var text="https://www.linkedin.com/company/";$(document).ready(function(){$("#linkedin-url").val(text);$("#linkedin-add-button").hide();$("#linkedin-progress").hide()});function initLinkedIn(){$("#linkedin-dialog")[0].open();$("#linkedin-add-button").hide()}function processLinkedIn(){var b=$("#linkedin-url");var a=b.val();if(a.length===0){$("label").css("color","red");b.attr("label","Enter your company's LinkedIn URL")}else{$("#linkedin-progress").show();$("#linkedin-add-button").hide();openLinkedIn(a)}}function openLinkedIn(a){$.ajax({type:"POST",dataType:"json",data:{link:a},url:"/ajax/linkedin-scraper",success:function(c){try{console.log(c);companyInfo=JSON.parse(c.data)}catch(b){console.error(b)}$("#linkedin-progress").hide();if(companyInfo===null||(companyInfo.name.length===0&&companyInfo.description.length===0&&companyInfo.legacyLogo.length===0&&companyInfo.heroImage.length===0)){$("label").css("color","red");$("#linkedin-url").attr("label","LinkedIn company not found")}else{$("label").css("color","green");$("#linkedin-url").attr("label","LinkedIn company and information found");$("#linkedin-add-button").show()}},error:function(d,b,c){console.log(c)}})}function cancelLinkedIn(){$("label").css("color","");$("#linkedin-url").attr("label","Enter your company's LinkedIn URL");$("#linkedin-progress").hide();$("#linkedin-add-button").hide();$("#linkedin-url").val(text)}function addData(){$("#linkedin-cancel-button").trigger("click");addName();addDescription();addImages()}function addName(){$("#company").val(companyInfo.name)}function addDescription(){$("#company-description").val(companyInfo.description)}function addImages(){var a=["heroImage","legacyLogo"];var b=null;for(var d=0;d<a.length;d++){if(companyInfo[a[d]].length>0){var c="https://media.licdn.com/media"+companyInfo[a[d]];b=$('<img class="recruiting-token-image" id="'+a[d]+'">');$(b).attr("src",c);b.data("file",null);b.data("name",a[d]);b.data("saved",false);b.data("scraped",true);createThumbnail(b,"company-image-container")}}}function uploadScrapedImage(c,b,a){$.ajax({type:"POST",dataType:"json",url:"ajax/linkedin-scraper",data:{oldName:b,newName:a},success:function(e,d){if(e.success){saveScrapedImage(c,a)}},error:function(f,d,e){console.log(e)}})}function saveScrapedImage(c,b){c.data("name",b);var a="ajax/recruiting_company_image/save";var d={recruiting_company_id:c.data("recruiting_company_id"),file_name:b};postSave(c,a,d)};