var companyInfo=null;$(document).ready(function(){$("#linkedin-add-button").hide();$("#linkedin-progress").hide()});function initLinkedIn(){$("#linkedin-dialog")[0].open();$("#linkedin-add-button").hide()}function processLinkedIn(){var b=$("#linkedin-url");var a=b.val();if(a.length===0){$("label").css("color","red");b.attr("label","Enter your company's LinkedIn username, i.e. 'sizzle'")}else{$("#linkedin-progress").show();$("#linkedin-add-button").hide();openLinkedIn(a)}}function openLinkedIn(a){$.ajax({type:"POST",dataType:"json",data:{name:a},url:"/ajax/linkedin-scraper",success:function(c){try{companyInfo=JSON.parse(c.data)}catch(b){console.error(b)}if(companyInfo==null){handleToast(2)}else{if(companyInfo.name.length===0&&companyInfo.description.length===0&&companyInfo.legacyLogo.length===0&&companyInfo.heroImage.length===0){handleToast(1)}else{handleToast(0)}}},error:function(d,b,c){console.log(c)}})}function cancelLinkedIn(){$("label").css("color","");$("#linkedin-progress").hide();$("#linkedin-url").val("");$("#linkedin-add-button").hide()}function addData(){$("#linkedin-cancel-button").trigger("click");$("#toast").hide();addName();addDescription();addImages()}function addName(){$("#company").val(companyInfo.name)}function addDescription(){$("#company-description").val(companyInfo.description)}function addImages(){var a=["heroImage","legacyLogo"];var b=null;for(var d=0;d<a.length;d++){if(companyInfo[a[d]].length>0){var c="https://media.licdn.com/media"+companyInfo[a[d]];b=$('<img class="recruiting-token-image" id="'+a[d]+'">');$(b).attr("src",c);b.data("file",null);b.data("name",a[d]);b.data("saved",false);b.data("scraped",true);createThumbnail(b,"company-image-container")}}}function uploadScrapedImage(c,b,a){$.ajax({type:"POST",dataType:"json",url:"ajax/linkedin-scraper",data:{oldName:b,newName:a},success:function(e,d){if(e.success){saveScrapedImage(c,a)}}})}function saveScrapedImage(c,b){c.data("name",b);var a="ajax/recruiting_company_image/save";var d={recruiting_company_id:c.data("recruiting_company_id"),file_name:b};postSave(c,a,d)}function handleToast(a){var b="";switch(a){case 0:b="LinkedIn company and information found";$("#linkedin-add-button").show();break;case 1:b="LinkedIn company found but no information found";break;case 2:b="LinkedIn company not found";break;default:break}$("#toast").attr("text",b);$("#linkedin-progress").hide()}function resetToast(){$("#toast").attr("text","Searching for LinkedIn company")};