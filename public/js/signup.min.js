function signupOpen(){signupClear();$("#signup-dialog").modal()}function signupClear(){$("#signup-alert-placeholder").html("<div></div>");$("#first_name").val("");$("#last_name").val("");$("#signup_email").val("");$("#signup_password").val("")}function signupClose(){$("#signup-dialog").modal("hide")}function signupError(a){$("#signup-alert-placeholder").html('<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><span>'+a+"</span></div>")}function signupInfo(a){$("#signup-alert-placeholder").html('<div class="alert alert-info"><span>'+a+"</span></div>")}function signupSuccess(c,d,a){var b;if(d=="FACEBOOK"){b=a.signup_email}else{b=$("#signup_email").val()}$("#signup-alert-placeholder").html('<div class="alert alert-success"><span>You have successfully signed up with S!zzle!</span></div>');if(a.reg_type=="FACEBOOK"){signupInfo("Logging into S!zzle...");a.login_email=a.signup_email;a.login_type=a.reg_type;processLogin(a)}else{signupClose();window.location="/thankyou?action=signup&email="+b}}function signupEmail(){$("#reg_type").val("EMAIL");if(!$("#signup_email").val()){signupError("Please enter a valid email.")}else{if(!$("#signup_password").val()){signupError("Please enter a password.")}else{processSignup($("#signup-form").serialize(),"EMAIL")}}}function signupFacebook(){$("#reg_type").val("FACEBOOK");signupInfo("Checking Facebook login status.  Please wait...");FB.login(function(a){handleFBReg(a)},{scope:"user_photos, public_profile, email"})}function handleFBReg(a){if(a.status==="connected"){FB.api("/me?fields=email,last_name,first_name",function(b){b.reg_type="FACEBOOK";b.signup_email=b.email;processSignup(b,"FACEBOOK")})}else{if(a.status==="not_authorized"){signupSuccess(data.app_root,"FACEBOOK")}else{signupError("Sign Up using Facebook failed.")}}}function processSignup(a,b){signupInfo("Processing your registration.  Please wait...");$.post("/ajax/signup",a,function(d,e,c){if(d.status==="SUCCESS"){signupSuccess(d.app_root,b,a)}else{if(d.status==="ERROR"){signupError(d.message)}else{signupError("Unknown return status: "+d.status)}}}).fail(function(){signupError("Sign up failed.")})}function switchToLogin(){signupClose();loginOpen()};